<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Leaderboard</title>

<style>
  body { 
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; 
    background:#f7f9fc; 
    padding: 20px; 
    color:#111;
  }
  .card {
    background: white; 
    padding: 20px; 
    border-radius: 12px; 
    max-width: 600px; 
    margin: auto;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  }
  h1 { margin-top: 0; text-align:center; }
  table {
    width: 100%; 
    border-collapse: collapse; 
    margin-top: 20px;
  }
  th, td {
    padding: 10px; 
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background: #f0f0f0;
  }
  tr:hover {
    background: #f9f9f9;
  }
  .rank {
    font-weight: bold;
    width: 20px;
  }
</style>
</head>

<body>
<div class="card">
  <h1>Leaderboard</h1>

  <table id="leaderboard">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Score</th>
        <th>Timestamp</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  const url = "https://script.google.com/macros/s/AKfycbxzMw31qyBzarQY5VZXifKvhWR5LC9CNJgGNSbxqq3R0tZtteL5kCBBpYC4a-avhyuOzQ/exec";

  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (!data.ok) {
        alert("Error: " + data.error);
        return;
      }

      // Sort highest score first
      const sorted = data.rows.sort((a, b) => (b.score || 0) - (a.score || 0));

      const tbody = document.querySelector("#leaderboard tbody");
      tbody.innerHTML = "";

      sorted.forEach((row, i) => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td class="rank">${i + 1}</td>
          <td>${row.name}</td>
          <td>${row.score}</td>
          <td>${row.timestamp}</td>
        `;

        tbody.appendChild(tr);
      });
    })
    .catch(err => alert("Fetch error: " + err));
</script>

</body>
</html>
